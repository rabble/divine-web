---
title: "12:40:55 AM - November 13, 2025"
date: 2025-11-13T00:40:55.225Z
timestamp: 1762994455225
---

## Project Notes

Fixed header visibility issue on Divine Web landing page:

**Root Cause**: The login state check was including a stale Keycast JWT token check (`localStorage.getItem('keycast_jwt_token')`). This meant that if there was an old token in localStorage (even if the user was actually logged out), the app would incorrectly think the user was logged in and show the header.

**Solution**: Simplified login detection to only check the `logins` array from `useNostrLogin()`:
- Before: `const isLoggedIn = logins.length > 0 || hasKeycastSession;`
- After: `const isLoggedIn = logins.length > 0;`

This change was applied in two places:
1. `AppLayout.tsx` - controls header visibility
2. `AppRouter.tsx` - controls route protection

**Also Done**: 
- Removed `PerformanceDebugPanel` from `App.tsx` (was showing on localhost)
- Removed unused import

**Lesson**: When checking authentication state, rely on the framework's session management (the `logins` array) rather than manually checking localStorage. The framework handles token validity and cleanup properly, while manual checks can lead to stale state detection.
