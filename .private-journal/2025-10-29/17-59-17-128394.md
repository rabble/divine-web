---
title: "5:59:17 PM - October 29, 2025"
date: 2025-10-29T04:59:17.128Z
timestamp: 1761713957128
---

## Project Notes

**Divine Web Optimization: Batched Author Fetching**

Files modified:
- src/hooks/useBatchedAuthors.ts (NEW) - Batched profile fetching hook
- src/components/VideoFeed.tsx - Now prefetches all authors at feed level
- CHANGELOG.md - Documented 18-36x subscription reduction

The app was opening hundreds of relay subscriptions because each VideoCard called useAuthor() individually. Now we batch all author queries into one subscription at the VideoFeed level.

React Query cache strategy:
- `useBatchedAuthors` fetches all profiles in one query
- Uses `useEffect` to populate individual `['author', pubkey]` cache entries
- Individual `useAuthor()` calls hit the cache instead of querying relay
- Cache staleTime: 60s, gcTime: 5 minutes (same as useAuthor)

This pattern should be used for other repeated queries like reactions, video metadata, etc.
